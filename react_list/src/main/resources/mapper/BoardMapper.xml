<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.BoardMapper">

    <select id="getBoards" resultType="com.example.demo.entity.Board">
	    SELECT *
	    FROM (
	        SELECT ROWNUM AS RNUM, a.*
	        FROM (
	            SELECT 
	                id,
	                title,
	                writer,
	                content,
	                created_at AS createdAt
	            FROM board
	            ORDER BY id DESC
	        ) a
	        WHERE ROWNUM &lt;= #{page} * #{size}
	    )
	    WHERE RNUM &gt; (#{page} - 1) * #{size}
	</select>


    <select id="getTotalCount" resultType="int">
        SELECT COUNT(*) FROM board
    </select>

</mapper>